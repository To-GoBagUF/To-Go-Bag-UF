<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>To-Go Bag UF</title>

<style>
  :root{
    --navy:#001f3f;
    --white:#ffffff;
    --muted:#6b879a;
    --radius:12px;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,system-ui,Arial,sans-serif;color:var(--navy);background:var(--white)}
  header{background:var(--navy);color:var(--white);padding:56px 20px;text-align:center}
  header h1{font-size:44px;margin:0}
  header p{margin:10px 0 18px;font-size:18px;opacity:0.95}
  .header-buttons{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}
  .btn{padding:12px 22px;border-radius:10px;font-size:16px;border:0;cursor:pointer;transition:transform .18s}
  .btn-primary{background:var(--white);color:var(--navy);font-weight:700}
  .btn-secondary{background:transparent;color:var(--white);border:2px solid rgba(255,255,255,0.12)}
  .btn:active{transform:scale(.99)}
  .preorder{background:var(--navy);color:var(--white);text-align:center;padding:10px;font-weight:700}
  main{max-width:1100px;margin:36px auto;padding:0 20px}
  section{display:none;padding:40px 0}
  .section-inner{max-width:900px;margin:0 auto}
  h2{margin:0 0 12px;font-size:26px}
  p.lead{margin:0 0 14px;color:#073049}
  .product-card{display:grid;grid-template-columns:1fr 360px;gap:24px;align-items:start}
  .prod-visual{background:#f4f9ff;border-radius:14px;padding:16px;text-align:center}
  label{display:block;margin:8px 0 6px;font-weight:700;color:#00314f}
  select,input[type="text"],input[type="email"],input[type="number"]{width:100%;padding:10px;border-radius:8px;border:1px solid #cfe0ef;font-size:15px}
  .muted{color:var(--muted);font-size:14px}
  footer{background:var(--navy);color:var(--white);padding:22px;text-align:center}
  #cartIcon{position:fixed;right:20px;bottom:20px;background:var(--navy);color:white;padding:12px 14px;border-radius:999px;z-index:1500;cursor:pointer;box-shadow:0 10px 30px rgba(0,0,0,0.15)}
  /* modals */
  .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:flex;justify-content:center;align-items:center;z-index:1600;opacity:0;pointer-events:none;transition:opacity .22s}
  .modal-backdrop.open{opacity:1;pointer-events:auto}
  .modal{width:100%;max-width:500px;max-height:90vh;overflow-y:auto;background:#fff;border-radius:var(--radius);padding:20px;box-shadow:0 18px 48px rgba(0,0,0,0.2);transform:translateY(-18px);transition:transform .22s;position:relative}
  .modal-backdrop.open .modal{transform:translateY(0)}
  .closeX{position:absolute;right:18px;top:12px;cursor:pointer;color:#666;font-size:18px}
  .cart-item{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:10px}
  .summary{background:#f7fbff;padding:12px;border-radius:10px;margin-top:12px}
  @media (max-width:900px){
    .product-card{grid-template-columns:1fr}
    .prod-visual{order:-1}
    .modal{max-width:95%;padding:16px;max-height:85vh}
  }
  .pay-btn{
    background:#00b22d;
    color:white;
    font-weight:700;
    width:100%;
    padding:14px;
    border:0;
    border-radius:10px;
    font-size:17px;
    margin-top:10px;
  }
  .pay-btn:active{transform:scale(.99)}
</style>
</head>

<body>
<header>
  <h1>To-Go Bag</h1>
  <p>F√∂r alla sm√• kriser i livet ‚Äì vi packade v√§skan √•t dig üòâ</p>
  <p style="font-size:15px;opacity:0.9;">Klicka p√• <b>Produkt</b> h√§r ovan f√∂r att se och best√§lla.</p>
  <div class="header-buttons">
    <button class="btn btn-primary" onclick="showSection('product')">Produkt</button>
    <button class="btn btn-secondary" onclick="showSection('contact')">Kontakt</button>
  </div>
</header>

<div class="preorder">Just nu f√∂rbest√§llning</div>

<main>
<section id="product">
  <div class="section-inner">
    <h2>The To-Go Bag</h2>
    <p class="lead">En liten v√§ska med handsprit, pl√•ster, h√•rsnoddar, binda/tampong, m√ºslibar, tuggummi och v√•tservetter.</p>

    <div class="product-card">
      <div class="prod-visual">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/Travel_Bag_Icon.svg/512px-Travel_Bag_Icon.svg.png" width="150" alt="To-Go Bag">
      </div>
      <div>
        <label for="variantSelect">Variant:</label>
        <select id="variantSelect">
          <option value="Binda/Tampong">Binda/Tampong</option>
          <option value="Herr">Herr</option>
        </select>

        <div id="subVariantContainer">
          <label for="subVariantSelect">V√§lj produkt:</label>
          <select id="subVariantSelect">
            <option value="Binda">Binda</option>
            <option value="Tampong">Tampong</option>
          </select>
        </div>

        <label for="colorSelect">F√§rg:</label>
        <select id="colorSelect">
          <option value="Bl√•">Bl√•</option>
          <option value="Rosa">Rosa</option>
          <option value="Svart">Svart</option>
          <option value="Vit">Vit</option>
        </select>

        <button id="orderBtn" class="btn btn-primary">L√§gg i varukorg ‚Äì 85 kr</button>
      </div>
    </div>
  </div>
</section>

<section id="contact">
  <div class="section-inner">
    <h2>Kontakt</h2>
    <p>Maila oss p√• <a href="mailto:togobaguf@gmail.com">togobaguf@gmail.com</a></p>
  </div>
</section>
</main>

<div id="cartIcon">üõí <span id="cartCount">0</span></div>

<!-- Cart Modal -->
<div class="modal-backdrop" id="cartModal">
  <div class="modal">
    <span class="closeX" id="closeCart">&times;</span>
    <h2>Din varukorg</h2>
    <div id="cartContent"></div>
  </div>
</div>

<!-- Checkout Modal -->
<div class="modal-backdrop" id="checkoutModal">
  <div class="modal">
    <span class="closeX" id="closeCheckout">&times;</span>
    <h2>Slutf√∂r best√§llning</h2>
    <form id="checkoutForm">
      <input type="text" id="name" placeholder="Namn" required>
      <input type="email" id="email" placeholder="E-post" required>
      <input type="text" id="phone" placeholder="Telefonnummer" required>
      <input type="text" id="address" placeholder="Adress" required>
      <input type="text" id="postal" placeholder="Postnummer" required>
      <input type="text" id="city" placeholder="Stad" required>
      <label for="shipping">Fraktmetod:</label>
      <select id="shipping">
        <option value="Standard">Standard</option>
        <option value="Express">Express</option>
      </select>
      <input type="number" id="quantityCheckout" value="1" min="1">
      <button type="button" class="pay-btn" onclick="sendShippingAndPay()">üí∏ Betala & F√∂rbest√§ll</button>
    </form>
  </div>
</div>

<footer>&copy; 2025 To-Go Bag UF</footer>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
emailjs.init("ZUlGUNzP7Tqxg-LkD");

function showSection(id){
  document.querySelectorAll("section").forEach(s=>s.style.display="none");
  document.getElementById(id).style.display="block";
  window.scrollTo({top:0,behavior:'smooth'});
}

let cart = 0;

document.getElementById("variantSelect").addEventListener("change", function(){
  document.getElementById("subVariantContainer").style.display =
    (this.value === "Binda/Tampong") ? "block" : "none";
});

function openModal(id){document.getElementById(id).classList.add("open");}
function closeModal(id){document.getElementById(id).classList.remove("open");}

document.getElementById("orderBtn").onclick = function(){
  cart = 1;
  const variant = document.getElementById("variantSelect").value;
  const sub = (variant === "Binda/Tampong") ? document.getElementById("subVariantSelect").value : "";
  const color = document.getElementById("colorSelect").value;
  document.getElementById("cartCount").innerText = cart;
  document.getElementById("cartContent").innerHTML = `
    <p><b>The To-Go Bag</b> ‚Äì 85 kr</p>
    <p>Variant: ${variant}${sub ? " (" + sub + ")" : ""}</p>
    <p>F√§rg: ${color}</p>
    <label>Antal:</label>
    <input type="number" id="cartQuantity" value="1" min="1">
    <p>Total: <span id="cartTotal">85</span> kr</p>
    <button class="btn btn-primary" id="proceedCheckout">F√∂rbest√§ll / Checkout</button>`;
  openModal("cartModal");

  const qty = document.getElementById("cartQuantity");
  const total = document.getElementById("cartTotal");
  qty.addEventListener("input", ()=>{let q=parseInt(qty.value)||1;total.textContent=85*q;});

  document.getElementById("proceedCheckout").onclick = ()=>{
    const q=parseInt(qty.value)||1;
    document.getElementById("quantityCheckout").value=q;
    closeModal("cartModal");
    openModal("checkoutModal");
  };
};

document.getElementById("cartIcon").onclick = ()=>{ cart>0 ? openModal("cartModal") : alert("Din varukorg √§r tom."); };
document.getElementById("closeCart").onclick = ()=>closeModal("cartModal");
document.getElementById("closeCheckout").onclick = ()=>closeModal("checkoutModal");

function sendShippingAndPay() {
  const data = {
    name: document.getElementById("name").value.trim(),
    email: document.getElementById("email").value.trim(),
    phone: document.getElementById("phone").value.trim(),
    address: document.getElementById("address").value.trim(),
    postal: document.getElementById("postal").value.trim(),
    city: document.getElementById("city").value.trim(),
    shipping: document.getElementById("shipping").value,
    quantity: parseInt(document.getElementById("quantityCheckout").value) || 1,
  };
  data.total = data.quantity * 85;

  if (!data.name || !data.email || !data.address) {
    alert("Fyll i alla f√§lt innan du forts√§tter.");
    return;
  }

  // Skicka bekr√§ftelse via EmailJS
  emailjs.send("service_obk5jf2", "template_kj9rgm7", data)
    .then(() => {
      alert("Tack f√∂r din f√∂rbest√§llning! Swish √∂ppnas nu om du anv√§nder mobil.");

      // Swish-betalning ‚Äî fungerar endast p√• mobil
      const swishUrl = `swish://paymentrequest?token=1&callbackurl=https://togobaguf.com&payee=0764134947&amount=${data.total}&message=To-Go%20Bag%20F√∂rbest√§llning`;
      const encodedUrl = encodeURI(swishUrl);

      if (/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)) {
        window.location.href = encodedUrl;
      } else {
        alert("Swish kan bara √∂ppnas automatiskt p√• mobil. √ñppna sidan i mobilen f√∂r att betala.");
      }

      closeModal("checkoutModal");
    })
    .catch((error) => {
      console.error(error);
      alert("Kunde inte skicka best√§llning. Kontrollera din internetanslutning och f√∂rs√∂k igen.");
    });
}


  emailjs.send("service_obk5jf2","template_kj9rgm7",data)
  .then(()=>{
    alert("Tack f√∂r din f√∂rbest√§llning! Swish √∂ppnas nu om du anv√§nder mobil.");
    if(/Mobi|Android/i.test(navigator.userAgent)){
      window.location.href=`swish://paymentrequest?token=1&callbackurl=https://togobaguf.com&payee=0764134947&amount=${data.total}&message=To-Go%20Bag%20F√∂rbest√§llning`;
    } else alert("Swish-betalning fungerar bara p√• mobilen.");
    closeModal("checkoutModal");
  })
  .catch(e=>alert("Kunde inte skicka best√§llning, f√∂rs√∂k igen."));
}
</script>
</body>
</html>
